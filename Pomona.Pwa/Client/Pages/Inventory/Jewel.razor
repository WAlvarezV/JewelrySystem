@inherits JewelBase

<EditForm Model="@Jewel" OnSubmit="OnValidSubmit">
    <DataAnnotationsValidator />
    <div class="card-header">
        <h3>@Tittle</h3>
    </div>
    <div class="card-body">

        <div class="row">
            <div class="col-md-3">
                <label class="form-label" for="provider">Proveedor</label>
                <select disabled="@IsDisabled" class="form-control mb-2 mr-sm-2" @bind="Jewel.ProviderId">
                    <option value="0">-- Seleccione una opción --</option>
                    @foreach (var item in Providers)
                    {
                    <option value="@item.Id">@item.Name</option>
                    }
                </select>
                <ValidationMessage For="@(() => Jewel.ProviderId)" />
            </div>

            <div class="col-md-3">
                <label class="form-label" for="sale">Valor Gr. Costo</label>
                <input type="number" @ref="FirstInput" class="form-control" @bind="Jewel.GramValue" />
                <ValidationMessage For="@(() => Jewel.GramValue)"
                                   @onblur="OnBlur" />
            </div>

            <div class="col-md-3">
                <label class="form-label" for="sale">Valor Gr. Venta</label>
                <InputNumber class="form-control" @bind-Value="GramSaleValue"
                             @onblur="OnBlur" />
            </div>

            <div class="col-md-3">
                <label class="form-label" for="sale">Peso</label>
                <InputNumber style="color:red" class="form-control" @bind-Value="Jewel.Weight"
                             @onblur="OnBlur" />
                <ValidationMessage For="@(() => Jewel.Weight)" />
            </div>
        </div>

        <div class="row">

            <div class="col-md-3">
                <label class="form-label" for="refernce">Referencia</label>
                <input type="number" disabled="@EditMode" class="form-control" @bind="Jewel.Reference" />
                <ValidationMessage For="@(() => Jewel.Reference)" />
            </div>

            <div class="col-md-3">
                <label class="form-label" for="sale">Valor Costo</label>
                <InputNumber style="color:red" class="form-control" @bind-Value="Jewel.CostValue" />
                <ValidationMessage For="@(() => Jewel.CostValue)" />
            </div>

            <div class="col-md-3">
                <label class="form-label" for="sale">Valor Venta</label>
                <InputNumber class="form-control" @bind-Value="Jewel.SaleValue" />
                <ValidationMessage For="@(() => Jewel.SaleValue)" />
            </div>

            <div class="col-md-3">
                <label class="form-label" for="sale">Ganancia Probable</label>
                <InputNumber readonly class="form-control" @bind-Value="ProbableProfit" />
            </div>

        </div>

        @if (NeedLength)
        {
        <div class="row">
            <div class="col-md-3">
                <label class="form-label" for="length">Largo</label>
                <InputNumber class="form-control" @bind-Value="Jewel.Length" />
                <ValidationMessage For="@(() => Jewel.Length)" />
            </div>
        </div>
        }


        <div class="row">
            <div class="col-md-12">
                <label class="form-label" for="number">Descripción del Artículo</label>
                <InputTextArea class="form-control" @bind-Value="Jewel.Description" />
                <ValidationMessage For="@(() => Jewel.Description)" />
            </div>
        </div>


        <div class="card-footer bg-transparent">
            <div class="d-flex justify-content-end">
                <div class="col-md-2">
                    <a class="btn btn-outline-secondary btn-block" href="/jewelry/@ItemTypeId"><i class="bi bi-arrow-left"></i> Atrás</a>
                </div>
                @if (!EditMode)
                {
                <div class="col-md-2">
                    <button class="btn btn-outline-primary btn-block" @onclick="ClearForm"><i class="bi bi-x"></i> Limpiar</button>
                </div>
                }
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary btn-block"><i class="bi bi-check2"></i> Guardar</button>
                </div>
            </div>
        </div>
    </div>
</EditForm>



